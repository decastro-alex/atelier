<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="PaymentType">

  <typeAlias alias="PaymentType"
             type="no.studios.atelier.data.DefaultPaymentType"
             />

  <resultMap id="payment-type-result" class="PaymentType">
    <result property="id" column="id"/>
    <result property="name" column="name"/>
  </resultMap>

  <sql id="payment-type-field-list">
    id,
    name
  </sql>

  <select id="get-payment-type-by-id"
          parameterClass="integer"
          resultMap="payment-type-result">
    select <include refid="payment-type-field-list"/>
    from payment_type
    where id=#id#
  </select>

  <select id="get-all-payment-types" resultMap="payment-type-result">
    select <include refid="payment-type-field-list"/>
    from payment_type
  </select>

  <insert id="insert-payment-type" parameterClass="PaymentType">
    insert into payment_type (name)
    values(#name#)
    <selectKey keyProperty="id">
      select max(id) from payment_type
    </selectKey>
  </insert>

  <!-- updates a tip paymentType -->
  <update id="update-payment-type" parameterClass="PaymentType">
    update payment_type
    set name=#name#
    where id=#id#
  </update>

  <delete id="delete-payment-type" parameterClass="integer">
    delete from payment_type where id=#id#
  </delete>

</sqlMap>
